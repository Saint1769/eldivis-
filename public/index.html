<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>CoolChat Pro ‚Äî ElDivis</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="root">
    <header class="topbar">
      <div class="logo">CoolChat Pro</div>
      <div id="userArea"></div>
    </header>

    <main class="layout">
      <!-- Left Sidebar -->
      <aside class="leftpanel">
        <!-- Auth Section -->
        <section class="auth" id="authSection">
          <h3>–í–æ–π—Ç–∏ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
          <input id="inpUser" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
          <input id="inpPass" placeholder="–ü–∞—Ä–æ–ª—å" type="password">
          <div class="auth-actions">
            <button id="btnRegister">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            <button id="btnLogin">–í–æ–π—Ç–∏</button>
          </div>
        </section>

        <!-- Wallet Section -->
        <section class="wallet" id="walletSection" style="display:none">
          <div class="wallet-header">
            <div>–ú–æ–Ω–µ—Ç—ã: <span id="coinAmount">0</span>üíé</div>
            <div class="level">–£—Ä–æ–≤–µ–Ω—å: <span id="userLevel">1</span></div>
          </div>
          <div class="wallet-actions">
            <input id="buyAmount" placeholder="–°—É–º–º–∞ –º–æ–Ω–µ—Ç" type="number">
            <button id="btnBuy">–ö—É–ø–∏—Ç—å –º–æ–Ω–µ—Ç—ã</button>
          </div>
          <div class="bonus-section">
            <button id="dailyBonusBtn" onclick="claimDailyBonus()" class="bonus-btn">üéÅ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å</button>
          </div>
        </section>

        <!-- Navigation Tabs -->
        <section class="nav-tabs" id="navTabs" style="display:none">
          <button class="tab-btn active" data-tab="users">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
          <button class="tab-btn" data-tab="groups">üë™ –ì—Ä—É–ø–ø—ã</button>
          <button class="tab-btn" data-tab="friends">ü§ù –î—Ä—É–∑—å—è</button>
          <button class="tab-btn" data-tab="market">üõí –ú–∞—Ä–∫–µ—Ç</button>
        </section>

        <!-- Users List -->
        <section class="tab-content active" id="usersTab">
          <div class="section-header">
            <h4>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h4>
            <input type="text" id="userSearch" placeholder="–ü–æ–∏—Å–∫..." class="search-input">
          </div>
          <div id="usersList" class="userslist"></div>
        </section>

        <!-- Groups List -->
        <section class="tab-content" id="groupsTab">
          <div class="section-header">
            <h4>–ì—Ä—É–ø–ø—ã</h4>
            <button id="createGroupBtn" class="icon-btn">+</button>
          </div>
          <div id="groupsList" class="groupslist"></div>
        </section>

        <!-- Friends List -->
        <section class="tab-content" id="friendsTab">
          <div class="section-header">
            <h4>–î—Ä—É–∑—å—è</h4>
            <div class="friend-stats">
              <span id="friendsCount">0</span> –¥—Ä—É–∑–µ–π
            </div>
          </div>
          <div id="friendsList" class="friendslist"></div>
        </section>

        <!-- Marketplace -->
        <section class="tab-content" id="marketTab">
          <div class="section-header">
            <h4>–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</h4>
          </div>
          <div class="market-tabs">
            <button class="market-tab active" data-market="nfts">NFT</button>
            <button class="market-tab" data-market="stickers">–°—Ç–∏–∫–µ—Ä—ã</button>
            <button class="market-tab" data-market="themes">–¢–µ–º—ã</button>
          </div>
          <div id="nftSection" class="market-content active">
            <h4>NFT-–∫–æ–ª–ª–µ–∫—Ü–∏–∏</h4>
            <div id="nftList" class="nftlist"></div>
          </div>
          <div id="stickersSection" class="market-content">
            <h4>–°—Ç–∏–∫–µ—Ä—ã</h4>
            <div id="stickersList" class="stickerslist"></div>
          </div>
          <div id="themesSection" class="market-content">
            <h4>–¢–µ–º—ã –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</h4>
            <div id="themesList" class="themeslist"></div>
          </div>
        </section>

        <!-- Achievements -->
        <section class="achievements-preview" id="achievementsSection" style="display:none">
          <h4>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h4>
          <div id="achievementsList" class="achievementslist"></div>
          <button id="showAllAchievements" class="text-btn">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ</button>
        </section>
      </aside>

      <!-- Main Chat Area -->
      <section class="chatpanel">
        <div class="chat-header">
          <div id="chatsHeader" class="chat-title">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç –¥–ª—è –Ω–∞—á–∞–ª–∞ –æ–±—â–µ–Ω–∏—è</div>
          <div class="chat-actions" id="chatActions" style="display:none">
            <button id="voiceCallBtn" class="icon-btn" title="–ì–æ–ª–æ—Å–æ–≤–æ–π –∑–≤–æ–Ω–æ–∫">üé§</button>
            <button id="videoCallBtn" class="icon-btn" title="–í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫">üìπ</button>
            <button id="stickerPickerBtn" class="icon-btn" title="–°—Ç–∏–∫–µ—Ä—ã">üòä</button>
            <button id="moreActionsBtn" class="icon-btn" title="–ï—â–µ">‚ãØ</button>
          </div>
        </div>
        
        <div id="chatWindow" class="chatWindow"></div>
        
        <!-- Voice Call UI -->
        <div id="voiceCallUI" class="call-ui" style="display:none">
          <div class="call-info">
            <div id="callStatus">–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è...</div>
            <div id="callTimer">00:00</div>
          </div>
          <div class="call-controls">
            <button id="muteBtn" class="call-btn">üîá</button>
            <button id="endCallBtn" class="call-btn end-call">üìû</button>
            <button id="speakerBtn" class="call-btn">üîä</button>
          </div>
        </div>

        <!-- Message Composer -->
        <div id="composer" class="composer" style="display:none">
          <div class="composer-tools">
            <button id="emojiBtn" class="tool-btn">üòä</button>
            <button id="attachBtn" class="tool-btn">üìé</button>
            <button id="scheduleBtn" class="tool-btn" title="–û—Ç–ª–æ–∂–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ">‚è∞</button>
          </div>
          <input id="msgInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." onkeypress="handleMessageKeypress(event)">
          <div class="composer-actions">
            <button id="sendBtn" class="send-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            <button id="deleteAccount" class="danger-btn" title="–£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç">üóëÔ∏è</button>
          </div>
        </div>

        <!-- Sticker Picker -->
        <div id="stickerPicker" class="sticker-picker" style="display:none">
          <div class="sticker-categories">
            <button class="sticker-category active" data-category="emotions">–≠–º–æ—Ü–∏–∏</button>
            <button class="sticker-category" data-category="gestures">–ñ–µ—Å—Ç—ã</button>
            <button class="sticker-category" data-category="animals">–ñ–∏–≤–æ—Ç–Ω—ã–µ</button>
          </div>
          <div class="sticker-grid" id="stickerGrid">
            <!-- Stickers will be loaded here -->
          </div>
        </div>
      </section>

      <!-- Right Sidebar -->
      <aside class="rightpanel" id="rightPanel" style="display:none">
        <!-- User Profile -->
        <section class="user-profile">
          <div class="profile-header">
            <div class="profile-avatar" id="profileAvatar">
              <img src="" alt="Avatar" id="avatarImg">
            </div>
            <div class="profile-info">
              <h3 id="profileUsername"></h3>
              <div class="profile-status">
                <span class="status-indicator" id="profileStatus"></span>
                <span id="profileCustomStatus"></span>
              </div>
            </div>
          </div>
          <div class="profile-details">
            <div class="detail-item">
              <span class="detail-label">–£—Ä–æ–≤–µ–Ω—å:</span>
              <span class="detail-value" id="profileLevel">1</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">–ú–æ–Ω–µ—Ç—ã:</span>
              <span class="detail-value" id="profileCoins">0</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">–°–æ–æ–±—â–µ–Ω–∏–π:</span>
              <span class="detail-value" id="profileMessages">0</span>
            </div>
          </div>
          <div class="profile-bio" id="profileBio">
            –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–∏–ª –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ–±–µ.
          </div>
        </section>

        <!-- Group Info -->
        <section class="group-info" id="groupInfo" style="display:none">
          <h4>–£—á–∞—Å—Ç–Ω–∏–∫–∏ –≥—Ä—É–ø–ø—ã</h4>
          <div id="groupMembers" class="group-members">
            <!-- Group members will be listed here -->
          </div>
          <button id="inviteToGroup" class="action-btn">–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å</button>
        </section>

        <!-- Active Users -->
        <section class="active-users">
          <h4>–°–µ–π—á–∞—Å –æ–Ω–ª–∞–π–Ω</h4>
          <div id="activeUsersList" class="active-users-list">
            <!-- Active users will be listed here -->
          </div>
        </section>
      </aside>
    </main>

    <!-- Modals -->
    <div id="createGroupModal" class="modal" style="display:none">
      <div class="modal-content">
        <h3>–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É</h3>
        <input type="text" id="groupName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã">
        <textarea id="groupDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã"></textarea>
        <label class="checkbox-label">
          <input type="checkbox" id="groupPublic" checked>
          –ü—É–±–ª–∏—á–Ω–∞—è –≥—Ä—É–ø–ø–∞
        </label>
        <div class="modal-actions">
          <button id="createGroupConfirm" class="btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
          <button onclick="closeModal('createGroupModal')" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
        </div>
      </div>
    </div>

    <div id="scheduleModal" class="modal" style="display:none">
      <div class="modal-content">
        <h3>–û—Ç–ª–æ–∂–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</h3>
        <input type="datetime-local" id="scheduleTime">
        <div class="modal-actions">
          <button id="scheduleConfirm" class="btn-primary">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å</button>
          <button onclick="closeModal('scheduleModal')" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
        </div>
      </div>
    </div>

    <div id="achievementsModal" class="modal" style="display:none">
      <div class="modal-content">
        <h3>–í–∞—à–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
        <div id="allAchievements" class="achievements-grid">
          <!-- All achievements will be listed here -->
        </div>
      </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast" class="toast" style="display:none"></div>

    <!-- Audio Elements -->
    <audio id="messageSound" src="/public/sounds/message.mp3" preload="auto"></audio>
    <audio id="callSound" src="/public/sounds/call.mp3" preload="auto"></audio>
    <audio id="achievementSound" src="/public/sounds/achievement.mp3" preload="auto"></audio>
  </div>

  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  <script src="client.js"></script>
</body>
</html>