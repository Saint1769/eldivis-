
<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>LinguaSpark ‚Äî –±—ã—Å—Ç—Ä–∞—è –≥–∏–≥–∞–¥–µ–º–æ</title>
  <meta name="description" content="–ë—ã—Å—Ç—Ä–æ–µ –¥–µ–º–æ: —á–∞—Ç—ã, —É—Ä–æ–∫–∏, –º–∞–≥–∞–∑–∏–Ω, –¥–æ–Ω–∞—Ç—ã, VIP, –∫–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã, i18n, –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Å–ø–∏—Å–∫–∏.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <canvas id="bg" class="canvas-bg"></canvas>
  <header class="topbar"><div class="container row between center">
    <div class="row center"><div class="logo">LS</div></div>
    <nav id="nav" class="nav"></nav>
  </div></header>
  <main class="container mt-24">
    <div id="view"></div>
  </main>
  <footer class="container mt-24 mb-24"><a class="ghost-link" href="#home">¬© 2025 LinguaSpark ‚Äî –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –¥–µ–º–æ‚Äë–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞</a></footer>
  <div id="toast" class="toast"></div>
  <script>
// === App state ===
const App = {state:{lang:'ru',theme:'dark',user:{id:1,name:'–í—ã',vip:'none',decor:[],stickers:[],coins:100},cart:[],active:'home'},route:()=>{}};
// === i18n ===
const I18N = {"ru": {"home": "–ì–ª–∞–≤–Ω–∞—è", "explore": "–ü–æ–∏—Å–∫", "chat": "–ß–∞—Ç—ã", "lessons": "–£—Ä–æ–∫–∏", "store": "–ú–∞–≥–∞–∑–∏–Ω", "donate": "–î–æ–Ω–∞—Ç—ã+", "wheel": "–§–æ—Ä—Ç—É–Ω–∞", "profile": "–ü—Ä–æ—Ñ–∏–ª—å", "settings": "–ù–∞—Å—Ç—Ä–æ–π–∫–∏", "search": "–ü–æ–∏—Å–∫‚Ä¶", "buy": "–ö—É–ø–∏—Ç—å", "send": "–û—Ç–ø—Ä–∞–≤–∏—Ç—å", "pay": "–û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ ¬´PayPalych¬ª", "vip": "VIP", "coins": "–º–æ–Ω–µ—Ç"}, "en": {"home": "Home", "explore": "Explore", "chat": "Chats", "lessons": "Lessons", "store": "Store", "donate": "Donations+", "wheel": "Wheel", "profile": "Profile", "settings": "Settings", "search": "Search‚Ä¶", "buy": "Buy", "send": "Send", "pay": "Pay with PayPalych (demo)", "vip": "VIP", "coins": "coins"}, "es": {"home": "Inicio", "explore": "Explorar", "chat": "Chats", "lessons": "Lecciones", "store": "Tienda", "donate": "Donaciones+", "wheel": "Fortuna", "profile": "Perfil", "settings": "Ajustes", "search": "Buscar‚Ä¶", "buy": "Comprar", "send": "Enviar", "pay": "Pagar con PayPalych (demo)", "vip": "VIP", "coins": "monedas"}};
// === Helpers ===
const $ = (s)=>document.querySelector(s), $$=(s)=>document.querySelectorAll(s);
const t = (k)=> (I18N[App.state.lang][k]||k);
const money = (n)=>'$'+n.toFixed(2);
function toast(msg){ const tEl = $('#toast'); tEl.textContent = msg; tEl.classList.add('show'); setTimeout(()=>tEl.classList.remove('show'),1500); }
function setLang(l){ App.state.lang=l; renderNav(); renderMain(); }
function setRoute(r){ App.state.active=r; window.location.hash=r; renderMain(); }
window.addEventListener('hashchange',()=>{ const r=location.hash.replace('#','')||'home'; App.state.active=r; renderMain(); });
// === Background particles (non-blocking) ===
requestAnimationFrame(()=>{ (function bg(){ const c=document.getElementById('bg'); const ctx=c.getContext('2d'); let w=innerWidth,h=innerHeight; c.width=w; c.height=h;
  let pts=Array.from({length:120},()=>({x:Math.random()*w,y:Math.random()*h,vx:(Math.random()-.5)*.6,vy:(Math.random()-.5)*.6}));
  function step(){ ctx.clearRect(0,0,w,h); for(const p of pts){ p.x+=p.vx; p.y+=p.vy; if(p.x<0||p.x>w)p.vx*=-1; if(p.y<0||p.y>h)p.vy*=-1; }
    for(let i=0;i<pts.length;i++){ for(let j=i+1;j<pts.length;j++){ const a=pts[i],b=pts[j]; const dx=a.x-b.x,dy=a.y-b.y,d=Math.hypot(dx,dy);
      if(d<110){ const o=1-(d/110); ctx.globalAlpha=o*.35; ctx.beginPath(); ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y); ctx.strokeStyle='#6ea8fe'; ctx.stroke(); } }}
    requestAnimationFrame(step); }
  addEventListener('resize',()=>{ w=innerWidth;h=innerHeight;c.width=w;c.height=h; }); step(); })() });
// === Procedural data (instant load) ===
const TOTAL_PROFILES = 40000; const TOTAL_PHRASES = 30000;
const langs=["English","–†—É—Å—Å–∫–∏–π","Espa√±ol","Fran√ßais","Deutsch","Italiano","Portugu√™s","Êó•Êú¨Ë™û","ÌïúÍµ≠Ïñ¥","‰∏≠Êñá","ÿπÿ±ÿ®Ÿä","‡§π‡§ø‡§®‡•ç‡§¶‡•Ä","T√ºrk√ße","Polski","–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞","ƒåe≈°tina","ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨","◊¢◊ë◊®◊ô◊™","‡πÑ‡∏ó‡∏¢","Ti·∫øng Vi·ªát","Bahasa Indonesia","Svenska"];
const bios=["–õ—é–±–ª—é —É—á–∏—Ç—å —è–∑—ã–∫–∏ –∏ –∫–æ—Ñ–µ.","–ò—â—É —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞ –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏.","–ì–æ—Ç–æ–≤ –ø–æ–º–æ–≥–∞—Ç—å —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏.","–î–µ–ª–∞—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –ª—é–±–ª—é –º–µ–º—ã.","–ò–≥—Ä–∞—é –Ω–∞ –≥–∏—Ç–∞—Ä–µ –∏ –ø—Ä–∞–∫—Ç–∏–∫—É—é —Ä–∞–∑–≥–æ–≤–æ—Ä–Ω—ã–π.","–ò—â—É –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –º–∏–Ω–∏-–¥–∏–∞–ª–æ–≥–∏."];
const countries=["SE","JP","US","BR","RU","DE","ES","FR","IT","PL","CN","KR","IN","TR","UA","MX","AR"];
const levels=["A1","A2","B1","B2","C1","C2"];
function LCG(seed){ let s=seed>>>0; return ()=> (s = (s*1664525 + 1013904223)>>>0); }
const nameFirst=["Alex","Mika","Luca","Sofi","Chen","Yuna","Diego","Zara","Ivan","Noah","Emma","Olga","Kai","Aria","Yuki","Ravi","Ava","Leo","Mila","Sara","Omar","Liam","Nora","Nikita","Polina","Pavel","Lena","Kenji","Akira","Mar√≠a","Antonio","Carla","Gianni","Marek","Anna","Bjorn","Sven","Agata"];
const nameLast=["Sato","Kim","Garcia","Ivanov","M√ºller","Brown","Smith","Khan","Hernandez","Liu","Fernandez","Bianchi","Nowak","Silva","Hamada","Novak","Kowalski","Petrov","Chen","Berg","Svensson","Johansson","Lopez","Rodriguez","Kozlov","Lebedev","Popov"];
function pick(arr, rnd) { return arr[rnd()%arr.length]; }
function getProfile(i){ const rnd = LCG(12345+i); const first=pick(nameFirst,rnd); const last=pick(nameLast,rnd); const knows=[pick(langs,rnd),pick(langs,rnd)]; const learns=[pick(langs,rnd),pick(langs,rnd)]; return { id:i+1, name:first+" "+last, knows, learns, level:pick(levels,rnd), vip:['none','bronze','silver','gold'][rnd()%4], bio:pick(bios,rnd), country:pick(countries,rnd), age:(rnd()%45)+16 }; }
function getPhrase(i){ return { id:i+1, en:`Sample phrase number ${i+1} for practice.`, ru:`–ü—Ä–∏–º–µ—Ä —Ñ—Ä–∞–∑—ã –Ω–æ–º–µ—Ä ${i+1} –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏.`, es:`Frase de ejemplo n√∫mero ${i+1} para practicar.`, de:`Beispielsatz Nummer ${i+1} zum √úben.` }; }
// exactly 10 + 10
const GIFTS = Array.from({length:10}, (_,i)=>({id:i+1,icon:'üéÅ',title:`Gift Pack ${i+1}`,price:(1+i*0.5)}));
const DECOR = Array.from({length:10}, (_,i)=>({id:i+1,icon:'‚ú®',title:`Decoration ${i+1}`,price:(0.99+i*0.4)}));
// === Navigation ===
function renderNav(){ const nav = $('#nav'); const coins = `<span class="pill">ü™ô ${App.state.user.coins} ${t('coins')}</span>`; nav.innerHTML = `
  <a href="#home" class="${App.state.active==='home'?'active':''}" onclick="setRoute('home')">${t('home')}</a>
  <a href="#explore" class="${App.state.active==='explore'?'active':''}" onclick="setRoute('explore')">${t('explore')}</a>
  <a href="#chat" class="${App.state.active==='chat'?'active':''}" onclick="setRoute('chat')">${t('chat')}</a>
  <a href="#lessons" class="${App.state.active==='lessons'?'active':''}" onclick="setRoute('lessons')">${t('lessons')}</a>
  <a href="#store" class="${App.state.active==='store'?'active':''}" onclick="setRoute('store')">${t('store')}</a>
  <a href="#donate" class="${App.state.active==='donate'?'active':''}" onclick="setRoute('donate')">${t('donate')}</a>
  <a href="#wheel" class="${App.state.active==='wheel'?'active':''}" onclick="setRoute('wheel')">${t('wheel')}</a>
  <a href="#profile" class="${App.state.active==='profile'?'active':''}" onclick="setRoute('profile')">${t('profile')}</a>
  <a href="#settings" class="${App.state.active==='settings'?'active':''}" onclick="setRoute('settings')">${t('settings')}</a>
  ${coins}`; }
// === Explore (virtualized, procedural) ===
function renderExplore(){ const root = $('#view'); root.innerHTML = `<div class="card pad-24 neon"><div class="row between center"><input id="q" class="input" placeholder="${t('search')}"><div class="row"><button class="btn ghost" onclick="sortBy('level')">Level</button><button class="btn ghost" onclick="sortBy('vip')">VIP</button></div></div><div id="list" class="mt-12" style="height:520px;overflow:auto;border:1px solid rgba(255,255,255,.12);border-radius:12px"></div></div>`;
  const list = $('#list'); const ITEM_H = 64; const rows = TOTAL_PROFILES; list.innerHTML = `<div id="spacer" style="height:${rows*ITEM_H}px;position:relative"></div>`;
  const spacer = $('#spacer'); let start=0,count=0; function draw(){ const scrollTop=list.scrollTop; const h=list.clientHeight; const first=Math.floor(scrollTop/ITEM_H); const cnt=Math.ceil(h/ITEM_H)+8; if(first===start && cnt===count) return; start=first; count=cnt; spacer.innerHTML=''; const frag=document.createDocumentFragment(); for(let i=first;i<Math.min(rows, first+cnt);i++){ const p=getProfile(i); const y=i*ITEM_H; const el=document.createElement('div'); el.style=`position:absolute;left:0;right:0;top:${y}px;height:${ITEM_H-6}px;padding:6px 10px`; el.className='store-item'; el.innerHTML = `<div>üë§</div><div><div><b>${p.name}</b> ‚Ä¢ ${p.country} ‚Ä¢ <span class="pill">${p.level}</span></div><div class="ghost-link">${p.knows.join(', ')} ‚áÑ ${p.learns.join(', ')}</div></div><div><button class="btn ghost" onclick="openChat(${p.id})">–ß–∞—Ç</button></div>`; frag.appendChild(el); } spacer.appendChild(frag); }
  list.addEventListener('scroll',draw); draw();
  $('#q').addEventListener('input', (e)=>{ const q=e.target.value.toLowerCase(); if(q.length<2) return;
    for(let i=0;i<1000;i++){ const p=getProfile(i); if(p.name.toLowerCase().includes(q) || p.knows.join(',').toLowerCase().includes(q) || p.learns.join(',').toLowerCase().includes(q)){ list.scrollTop = i*ITEM_H; break; } } });
}
function sortBy(k){ toast('–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–¥–µ–º–æ): '+k); } // procedural demo
// === Chat ===
let CHAT_WITH = null;
function openChat(id){ CHAT_WITH = getProfile(id-1); setRoute('chat'); }
function renderChat(){ const c = $('#view'); const p = CHAT_WITH || getProfile(0); c.innerHTML = `<div class="chat neon"><div class="chat-header"><div class="row center"><div class="pill">üë§</div><div class="ml-8"><b>${p.name}</b> <span class="pill">${p.level}</span> <span class="vip">‚òÖ</span></div></div><div class="row">${['–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è','–°—Ç–∏–∫–µ—Ä—ã','–ü–µ—Ä–µ–≤–æ–¥'].map(x=>`<span class="pill">${x}</span>`).join('')}</div></div><div id="chatBody" class="chat-body"><div class="msg left"><span>–ü—Ä–∏–≤–µ—Ç! –£—á–∏–º –≤–º–µ—Å—Ç–µ?</span></div></div><div class="chat-input"><input id="msg" class="input" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ"><button class="btn" onclick="sendMsg()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button></div></div>`; }
function sendMsg(){ const i=$('#msg'); const v=i.value.trim(); if(!v)return; const b=$('#chatBody'); const me=document.createElement('div'); me.className='msg right'; me.innerHTML='<span>'+v.replace(/[&<>]/g,s=>({'&':'&amp;','<':'&lt;','>':'&gt;'}[s]))+'</span>'; b.appendChild(me); b.scrollTop=b.scrollHeight; i.value=''; setTimeout(()=>{ const r=document.createElement('div'); r.className='msg left'; r.innerHTML='<span>üëç</span>'; b.appendChild(r); b.scrollTop=b.scrollHeight; },500);}
// === Lessons (virtualized procedural) ===
function renderLessons(){ const root = $('#view'); root.innerHTML = `<div class="card pad-24 neon"><div class="row between center"><div class="h3">–§—Ä–∞–∑—ã</div><input id="lq" class="input" placeholder="${t('search')}"></div><div id="ph" style="height:520px;overflow:auto;border:1px solid rgba(255,255,255,.12);border-radius:12px"></div></div>`; const list = $('#ph'); const ITEM_H = 56; const rows = TOTAL_PHRASES; list.innerHTML = `<div id="sp" style="height:${rows*ITEM_H}px;position:relative"></div>`; const sp = $('#sp'); function draw(){ const top=list.scrollTop; const h=list.clientHeight; const first=Math.floor(top/ITEM_H); const count=Math.ceil(h/ITEM_H)+8; sp.innerHTML=''; const frag=document.createDocumentFragment(); for(let i=first;i<Math.min(rows, first+count);i++){ const ph=getPhrase(i); const y=i*ITEM_H; const el=document.createElement('div'); el.style=`position:absolute;left:0;right:0;top:${y}px;height:${ITEM_H-6}px;padding:6px 10px`; el.className='store-item'; el.innerHTML=`<div>üìù</div><div>${ph.ru}<div class="ghost-link">${ph.en}</div></div><div><button class="btn ghost" onclick="speak('${ph.en.replace("'","\'")}')">‚ñ∂Ô∏é</button></div>`; frag.appendChild(el); } sp.appendChild(frag); } list.addEventListener('scroll',draw); draw(); $('#lq').addEventListener('input',(e)=>{ const q=e.target.value.toLowerCase(); if(q.length<2) return; const i=parseInt(q.replace(/\D/g,''))||0; if(i>0 && i<=rows) list.scrollTop = (i-1)*ITEM_H; }); }
function speak(txt){ if('speechSynthesis' in window){ const u = new SpeechSynthesisUtterance(txt); speechSynthesis.speak(u); } else { toast('TTS –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω'); } }
// === Store (exactly 10 each) ===
function renderStore(){ const root=$('#view'); const d = DECOR.map(it=>`<div class="store-item"><div>‚ú®</div><div><div><b>${it.title}</b></div><div class="ghost-link">–î–ª—è –ø—Ä–æ—Ñ–∏–ª—è</div></div><div class="row center"><div class="price">${money(it.price)}</div><button class="btn ghost" onclick="addToCart(${it.id},'decor')">${t('buy')}</button></div></div>`).join(''); const g = GIFTS.map(it=>`<div class="store-item"><div>üéÅ</div><div><div><b>${it.title}</b></div><div class="ghost-link">–û—Ç–ø—Ä–∞–≤—å –¥—Ä—É–≥—É</div></div><div class="row center"><div class="price">${money(it.price)}</div><button class="btn ghost" onclick="addToCart(${it.id},'gift')">${t('buy')}</button></div></div>`).join(''); root.innerHTML = `<div class="grid cols-2"><div class="card pad-24 neon"><h3>–£–∫—Ä–∞—à–µ–Ω–∏—è (10)</h3>${d}</div><div class="card pad-24 neon"><h3>–ü–æ–¥–∞—Ä–∫–∏ (10)</h3>${g}</div></div><div class="card pad-24 mt-16 neon"><div class="row between center"><div>–ö–æ—Ä–∑–∏–Ω–∞</div><div id="cartTotal" class="price">$0.00</div></div><div id="cartList" class="mt-12"></div><button class="btn mt-12" onclick="checkout()"> ${t('pay')}</button><div class="mt-8 ghost-link">–î–µ–º–æ-–æ–ø–ª–∞—Ç–∞. –ë–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.</div></div>`; renderCart(); }
function addToCart(id,kind){ const item = (kind==='decor'?DECOR:GIFTS).find(x=>x.id===id); App.state.cart.push({kind,id,price:item.price,title:item.title}); toast('–î–æ–±–∞–≤–ª–µ–Ω–æ: '+item.title); renderCart(); }
function renderCart(){ const box = $('#cartList'); if(!box) return; box.innerHTML = App.state.cart.map((it,i)=>`<div class="row between"><div>${it.title}</div><div class="ghost-link">${money(it.price)}</div><button class="btn ghost" onclick="rem(${i})">√ó</button></div>`).join(''); const sum = App.state.cart.reduce((s,i)=>s+i.price,0); const tEl=$('#cartTotal'); if(tEl) tEl.textContent=money(sum); }
function rem(i){ App.state.cart.splice(i,1); renderCart(); }
function checkout(){ const sum = App.state.cart.reduce((s,i)=>s+i.price,0); if(!sum){ toast('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞'); return; } toast('–û–ø–ª–∞—Ç–∞‚Ä¶'); setTimeout(()=>{ const tx=Math.random().toString(36).slice(2); toast('–û–ø–ª–∞—á–µ–Ω–æ ¬´PayPalych¬ª TX='+tx); App.state.user.decor.push(...App.state.cart.filter(x=>x.kind==='decor').map(x=>x.title)); App.state.cart.length=0; renderCart(); },900); }
// === Wheel of Fortune ===
function renderWheel(){ const rewards = [
  {text:'ü™ô +5', type:'coins', value:5},
  {text:'ü™ô +10', type:'coins', value:10},
  {text:'üéüÔ∏è –°—Ç–∏–∫–µ—Ä', type:'sticker', value:1},
  {text:'‚ú® –î–µ–∫–æ—Ä', type:'decor', value:1},
  {text:'–ü—É—Å—Ç–æ', type:'none', value:0},
  {text:'ü™ô +20', type:'coins', value:20},
  {text:'üéÅ –ü–æ–¥–∞—Ä–æ–∫', type:'gift', value:1},
  {text:'üí• –î–∂–µ–∫–ø–æ—Ç +50', type:'coins', value:50}
]; $('#view').innerHTML = `<div class="grid cols-2"><div class="card pad-24 neon"><h3>–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã</h3><div class="pointer"></div><div id="wh" class="wheel"><div class="wedge">SPIN</div></div><div class="mt-12"><button id="spin" class="btn spin-btn">–ö—Ä—É—Ç–∏—Ç—å (10 ü™ô)</button></div></div><div class="card pad-24 neon"><h3>–ù–∞–≥—Ä–∞–¥—ã</h3><div id="rw"></div></div></div>`; const wh = document.getElementById('wh'); const btn=document.getElementById('spin'); const rw = document.getElementById('rw'); let angle=0; btn.onclick=()=>{ if(App.state.user.coins<10){ toast('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç'); return; } App.state.user.coins-=10; renderNav(); const delta = 360*5 + Math.floor(Math.random()*360); angle = (angle + delta)%360; wh.style.transition='transform 3s cubic-bezier(.2,.8,.1,1)'; wh.style.transform='rotate('+angle+'deg)'; setTimeout(()=>{ const sector = Math.floor(((360 - (angle%360)) % 360)/45); const r = rewards[sector]; if(r.type==='coins'){ App.state.user.coins += r.value; toast('+'+r.value+' –º–æ–Ω–µ—Ç'); } if(r.type==='sticker'){ App.state.user.stickers.push('‚≠ê'); toast('–°—Ç–∏–∫–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω'); } if(r.type==='decor'){ if(DECOR[0]){ App.state.user.decor.push(DECOR[0].title); toast('–î–µ–∫–æ—Ä –ø–æ–ª—É—á–µ–Ω'); } } if(r.type==='gift'){ toast('–ü–æ–¥–∞—Ä–æ–∫ –æ—Ç–∫—Ä—ã—Ç!'); } if(r.type==='none'){ toast('–ù–∏—á–µ–≥–æ. –ü–æ–≤–µ–∑—ë—Ç –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑.'); } renderNav(); rw.innerHTML = `<div class="pill">–†–µ–∑—É–ª—å—Ç–∞—Ç: ${r.text}</div>`; confetti(); },3000); }; }
function confetti(){ const c=document.createElement('canvas'); c.width=innerWidth; c.height=innerHeight; c.style.position='fixed'; c.style.inset='0'; c.style.pointerEvents='none'; c.style.zIndex='1000'; document.body.appendChild(c); const x=c.getContext('2d'); const P=Array.from({length:200}},()=>({x:Math.random()*c.width,y:-20*Math.random(),vy:1+Math.random()*3,s:3+Math.random()*3})); let t=0; function draw(){ x.clearRect(0,0,c.width,c.height); for(const p of P){ p.y+=p.vy; x.globalAlpha=.9; x.fillStyle=['#60a5fa','#a78bfa','#34d399','#f472b6'][p.s%4|0]; x.fillRect(p.x,p.y,p.s,p.s); } if((t+=1)<180) requestAnimationFrame(draw); else document.body.removeChild(c); } draw(); }
// === Donate ===
function renderDonate(){ $('#view').innerHTML = `<div class="grid cols-3">${Array.from({length:36}},(_,i)=>`<div class="card pad-24 neon"><div class="row between center"><b>–ü–∞–∫–µ—Ç #${i+1}</b><span class="pill">${i%10===0?'legendary':i%3===0?'rare':'basic'}</span></div><ul class="list"><li>–°—Ç–∏–∫–µ—Ä—ã: ${10 + (i%20)}</li><li>–£–∫—Ä–∞—à–µ–Ω–∏—è: ${5 + (i%10)}</li><li>–ë—É—Å—Ç –æ–ø—ã—Ç–∞: ${1 + (i%3)}x</li></ul><div class="row between center"><div class="price">${money((i%10===0)?49.99:9.99)}</div><button class="btn" onclick="toast('–°–ø–∞—Å–∏–±–æ! (–¥–µ–º–æ)')">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å</button></div></div>`).join('')}</div>`; }
// === Profile & Settings ===
function renderProfile(){ const u=App.state.user; $('#view').innerHTML = `<div class="grid cols-2"><div class="card pad-24 neon"><div class="row center"><div class="pill">üôÇ</div><div class="ml-8"><b>${u.name}</b> <span class="pill">${t('vip')}: ${u.vip}</span></div></div><div class="mt-12">–£–∫—Ä–∞—à–µ–Ω–∏—è: ${u.decor.map(x=>'<span class="pill">'+x+'</span>').join(' ')||'‚Äî'}</div><div class="mt-12 counter">ü™ô ${u.coins} ${t('coins')}</div></div><div class="card pad-24 neon"><h3>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3><div class="row wrap">${['üî• 7‚Äë–¥–Ω–µ–≤–Ω–∞—è —Å–µ—Ä–∏—è','üí¨ 1k —Å–æ–æ–±—â–µ–Ω–∏–π','üåü –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è 100+'].map(x=>`<span class="pill">${x}</span>`).join('')}</div></div></div>`; }
function renderSettings(){ $('#view').innerHTML = `<div class="card pad-24 neon"><div class="row"><button class="btn ghost" onclick="setLang('ru')">RU</button><button class="btn ghost" onclick="setLang('en')">EN</button><button class="btn ghost" onclick="setLang('es')">ES</button></div><div class="mt-12 row"><button class="btn" onclick="App.state.user.vip='gold'; toast('VIP Gold –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω'); renderProfile();">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å VIP Gold (–¥–µ–º–æ)</button></div></div>`; }
// === Home ===
function renderHome(){ $('#view').innerHTML = `<div class="grid cols-2"><div class="card pad-24 neon"><h1>LinguaSpark</h1><div class="mt-12">–ë—ã—Å—Ç—Ä–∞—è –≤–µ—Ä—Å–∏—è: VIP, –º–∞–≥–∞–∑–∏–Ω, —á–∞—Ç—ã, —É—Ä–æ–∫–∏, –¥–æ–Ω–∞—Ç—ã –∏ –∫–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã. –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞.</div><div class="mt-16 row"><button class="btn" onclick="setRoute('explore')">${t('explore')}</button><button class="btn ghost" onclick="setRoute('store')">${t('store')}</button><button class="btn ghost" onclick="setRoute('wheel')">${t('wheel')}</button></div></div><canvas id="spark" class="h-260 w-520 neon"></canvas></div>`; const c=document.getElementById('spark'); if(c){ c.width=520; c.height=260; const x=c.getContext('2d'); for(let i=0;i<4000;i++){ x.globalAlpha=Math.random()*.2; x.fillStyle='#6ea8fe'; x.fillRect(Math.random()*520,Math.random()*260,1,1);} } }
// === Router ===
function renderMain(){ const r = App.state.active || (location.hash.replace('#','')||'home'); App.state.active=r; if(r==='home') return renderHome(); if(r==='explore') return renderExplore(); if(r==='chat') return renderChat(); if(r==='lessons') return renderLessons(); if(r==='store') return renderStore(); if(r==='donate') return renderDonate(); if(r==='wheel') return renderWheel(); if(r==='profile') return renderProfile(); if(r==='settings') return renderSettings(); }
window.addEventListener('load',()=>{ renderNav(); renderMain(); });
  </script>
</body>
</html>
